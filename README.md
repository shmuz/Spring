Spring
=======

**Spring** - это модификация Фар 3, в которой вместо встроенного макроязыка
используется скриптовый язык Lua 5.1.

Под макросом понимается Lua-скрипт и его мета-данные, такие как:
* Область начала исполнения скрипта.
* Клавиша, инициирующая исполнение скрипта из данной области.
* Предварительные условия для исполнения скрипта.
* Флаги времени исполнения: DisableOutput и NoSendKeysToPlugins.

Текущее состояние проекта
==========================

Что работает
-------------
* Импорт макросов посредством команды far /import.
* Запись макросов через `Ctrl.` или `CtrlShift.` (в диалоге работают все поля,
  кроме "Execute after FAR start").
* Макросы могут использовать функции и библиотеки Lua и LuaFAR.
* API `MacroControl` для плагинов: `MCTL_LOADALL`, `MCTL_SAVEALL`,
  `MCTL_SENDSTRING`, `MCTL_GETAREA`, `MCTL_ADDMACRO`, `MCTL_DELMACRO`.
  Эти функции доступны также из самих скриптов, в виде `far.MacroLoadAll`
  и т.д. (см. мануал LuaFAR).

Что не работает
----------------
* Нет функций макроязыка (ушли вместе с ним). Часть этих функций, под другими
  названиями, с другими синтаксисом и семантикой, есть в Lua и LuaFAR, другая
  часть - в планах на написание.
* API `MacroControl` для плагинов: `MCTL_GETLASTERROR`, `MCTL_GETSTATE`.

Что отличается
---------------
* Флаг DisableOutput не следует применять для макросов, включающих в себя
  вызовы API-шных диалогов и меню (`far.Dialog`, `far.Message`, `far.Show`,
  `far.Menu`).
* Передача клавиш из макроса осуществляется с помощью функции `far.Keys`,
  например: `far.Keys("A b CtrlC ShiftEnter")`.

